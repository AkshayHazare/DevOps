<!DOCTYPE html>
<html>
<!-- THIS FILE WAS GENERATED BY A SCRIPT: DO NOT EDIT IT! -->
    <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <link rel="stylesheet" href="../style.css">

        <!-- jQuery CDN -->
         <script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
         <!-- Bootstrap Js CDN -->
         <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

         <script type="text/javascript">
             var status = 'on';
             $(document).ready(function () {
                 $('#sidebarCollapse').on('click', function () {
                     $('#sidebar').toggleClass('active');
                     if (status == 'on') {
                         $('#sidebarText').text("Expand Side Nav");
                         status = 'off';
                     } else {
                         $('#sidebarText').text("Collapse Side Nav");
                         status = 'on';
                     }
                 });
             });
         </script>
        <title>
            ANSIBLE
        </title>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    </head>
    <body>
    <div class="wrapper">
<!-- Sidebar Holder -->
<nav id="sidebar">
    <div id="sidebarCollapse">
        <div class="sidebar-header">
            <h1>DevOps</h1>
            <strong>DO</strong>
        </div>
    </div>

    <ul class="list-unstyled components">
        <li>
            <a href="https://gcallah.github.io/DevOps/index.html">
                <i class="glyphicon glyphicon-home"></i>
                Home
            </a>
        </li>
        <li>
            <a href="#pageSubmenu" data-toggle="collapse" aria-expanded="false">
                <i class="glyphicon glyphicon-duplicate"></i>
                Main Areas of Coverage
            </a>
            <ul class="collapse list-unstyled" id="pageSubmenu">
                <li>
                  <a href="#BuildSubmenu" data-toggle="collapse" aria-expanded="false">Build</a>
                  <ul class="collapse list-unstyled" id="BuildSubmenu">
                    <li><a href="https://gcallah.github.io/DevOps/build/links.html">Build links</a></li>
                    <li><a href="https://gcallah.github.io/DevOps/build/theory.html">Build theory</a></li>
                    <li><a href="https://gcallah.github.io/DevOps/build/tools.html">Build tools</a></li>
                    <li><a href="https://gcallah.github.io/DevOps/build/implementation.html">Our build implementation</a></li>
                  </ul>
                </li>
                <li>
                  <a href="#CloudSubmenu" data-toggle="collapse" aria-expanded="false">Cloud</a>
                  <ul class="collapse list-unstyled" id="CloudSubmenu">
                    <li><a href="https://gcallah.github.io/DevOps/cloud/links.html">Cloud links</a></li>
                    <li><a href="https://gcallah.github.io/DevOps/cloud/theory.html">Cloud theory</a></li>
                    <li><a href="https://gcallah.github.io/DevOps/cloud/tools.html">Cloud tools</a></li>
                    <li><a href="https://gcallah.github.io/DevOps/cloud/implementation.html">Our cloud implementation</a></li>
                  </ul>
                </li>
                <li>
                  <a href="#CodingSubmenu" data-toggle="collapse" aria-expanded="false">Coding: Lean and Agile Practices</a>
                  <ul class="collapse list-unstyled" id="CodingSubmenu">
                    <li><a href="https://gcallah.github.io/DevOps/coding/links.html">Coding links</a></li>
                    <li><a href="https://gcallah.github.io/DevOps/coding/theory.html">Coding theory</a></li>
                    <li><a href="https://gcallah.github.io/DevOps/coding/tools.html">Coding tools</a></li>
                    <li><a href="https://gcallah.github.io/DevOps/coding/implementation.html">Our coding implementation</a></li>
                  </ul>
                </li>
                <li>
                  <a href="#DeploySubmenu" data-toggle="collapse" aria-expanded="false">Deployment</a>
                  <ul class="collapse list-unstyled" id="DeploySubmenu">
                    <li><a href="https://gcallah.github.io/DevOps/deployment/links.html">Deployment links</a></li>
                    <li><a href="https://gcallah.github.io/DevOps/deployment/theory.html">Deployment theory</a></li>
                    <li><a href="https://gcallah.github.io/DevOps/deployment/tools.html">Deployment tools</a></li>
                    <li><a href="https://gcallah.github.io/DevOps/deployment/implementation.html">Our deployment implementation</a></li>
                  </ul>
                </li>
                <li>
                  <a href="#MonitorSubmenu" data-toggle="collapse" aria-expanded="false">Monitoring</a>
                  <ul class="collapse list-unstyled" id="MonitorSubmenu">
                    <li><a href="https://gcallah.github.io/DevOps/monitoring/links.html">Monitoring links</a></li>
                    <li><a href="https://gcallah.github.io/DevOps/monitoring/theory.html">Monitoring theory</a></li>
                    <li><a href="https://gcallah.github.io/DevOps/monitoring/tools.html">Monitoring tools</a></li>
                    <li><a href="https://gcallah.github.io/DevOps/monitoring/implementation.html">Our monitoring implementation </a></li>
                  </ul>
                </li>
                <li>
                  <a href="#SecuritySubmenu" data-toggle="collapse" aria-expanded="false">Security: Rugged DevOps</a>
                  <ul class="collapse list-unstyled" id="SecuritySubmenu">
                    <li><a href="https://gcallah.github.io/DevOps/security/links.html">Security links</a></li>
                    <li><a href="https://gcallah.github.io/DevOps/security/theory.html">Security theory</a></li>
                    <li><a href="https://gcallah.github.io/DevOps/security/tools.html">Security tools</a></li>
                    <li><a href="https://gcallah.github.io/DevOps/security/implementation.html">Our security implementation</a></li>
                  </ul>
                </li>
                <li>
                  <a href="#TestingSubmenu" data-toggle="collapse" aria-expanded="false">Testing</a>
                  <ul class="collapse list-unstyled" id="TestingSubmenu">
                    <li><a href="https://gcallah.github.io/DevOps/testing/links.html">Testing links</a></li>
                    <li><a href="https://gcallah.github.io/DevOps/testing/theory.html">Testing theory</a></li>
                    <li><a href="https://gcallah.github.io/DevOps/testing/tools.html">Testing tools</a></li>
                    <li><a href="https://gcallah.github.io/DevOps/testing/implementation.html">Our testing implementation</a></li>
                  </ul>
                </li>
                <li>
                  <a href="#WorkflowSubmenu" data-toggle="collapse" aria-expanded="false">Workflow: DevOps as a Way of Work</a>
                  <ul class="collapse list-unstyled" id="WorkflowSubmenu">
                    <li><a href="https://gcallah.github.io/DevOps/workflow/links.html">Workflow links</a></li>
                    <li><a href="https://gcallah.github.io/DevOps/workflow/theory.html">Workflow theory</a></li>
                    <li><a href="https://gcallah.github.io/DevOps/workflow/tools.html">Workflow tools</a></li>
                    <li><a href="https://gcallah.github.io/DevOps/workflow/implementation.html">Our workflow implementation</a></li>
                  </ul>
                </li>
                <li>
                  <a href="#UXSubmenu" data-toggle="collapse" aria-expanded="false">UX: User Interface</a>
                  <ul class="collapse list-unstyled" id="UXSubmenu">
                    <li><a href="https://gcallah.github.io/DevOps/UX/links.html">UX links</a></li>
                    <li><a href="https://gcallah.github.io/DevOps/UX/theory.html">UX theory</a></li>
                    <li><a href="https://gcallah.github.io/DevOps/UX/tools.html">UX tools</a></li>
                    <li><a href="https://gcallah.github.io/DevOps/UX/implementation.html">Our UX implementation</a></li>
                  </ul>
                </li>
            </ul>
        </li>
        <li>
            <a href="#MaterialsSubmenu" data-toggle="collapse" aria-expanded="false">
                <i class="glyphicon glyphicon-link"></i>
                Other Materials
            </a>
            <ul class="collapse list-unstyled" id="MaterialsSubmenu">
              <li>
                <a href="#CMSubmenu" data-toggle="collapse" aria-expanded="false">Course-specific Material</a>
                <ul class="collapse list-unstyled" id="CMSubmenu">
                  <li><a href="https://gcallah.github.io/DevOps/courseDescr.html">Course description, Spring 2018</a></li>
                  <li><a href="https://gcallah.github.io/DevOps/courseExpectations.html">Course expectations, Spring 2018</a></li>
                  <li><a href="https://gcallah.github.io/DevOps/TeamsTable.html">Our teams for Spring 2018</a></li>
                  <li><a href="https://gcallah.github.io/DevOps/books.html">DevOps reading list</a></li>
                  <li><a href="https://gcallah.github.io/DevOps/journals/index.html">Our DevOps journals</a></li>
                  <li>
                  <a href="http://www.thedevopscourse.com/quiz/">Our Django
                  site: we are creating a quiz system here.</a>
                  </li>
                  <li>
                    <a href="https://gcallah.pythonanywhere.com/berkeley/">
                        DevOps Bibliographic Search
                    </a>
                  </li>
                </ul>
              </li>
              <li>
                <a href="#SupSubmenu" data-toggle="collapse" aria-expanded="false">Supplementary Material</a>
                <ul class="collapse list-unstyled" id="SupSubmenu">
                  <li><a href="https://gcallah.github.io/DevOps/websites.html">DevOps websites</a></li>
                </ul>
              </li>
            </ul>
        </li>
        <li>
            <a href="https://gcallah.github.io/DevOps/about.html">
                <i class="glyphicon glyphicon-briefcase"></i>
                About
            </a>
        </li>
    </ul>
</nav>
    <div id="content">
        <h1>
            <u><b>ANSIBLE</b></u>
        </h1>
        
        
        <p> 
        In this section, we will walkthrough the W(s) & H of Ansible, 
        understanding the basics and demonstration of practical 
        implementation with various modules.<br/></br>
        
        <div style="text-align: center;"> <img src="http://blogs.vmware.com/vmtn/files/2017/06/Screen-Shot-2017-06-13-at-2.37.59-PM.png"> </div> 
        
        </p>
        
        
        <p>
        </br></br>
            
        <b>WHAT is Ansible?</b> </br> 
        
        Ansible is a task execution engine, which defines a simple automation 
        language for dramatically improving the scalabilty, consistency, 
        reliability of a network or IT infrastructure. Funded and developed 
        under the umbrella of Redhat Enterprise, it is an open-source tool/
        software/language/system (..and may be magic) which has main utility 
        of configuration management, sever/hosts configuration, continuous 
        integration, and orchestration.
        
        </p>
        
        <p>
        </br>
            
        <b>WHY Ansible?</b> </br> 
        
        <ul>
        <h6>
        <li> <u>Scalable network operations</u>: Ansible is designed to 
        specially designed in order to scale its functionality in 
        accordance to work with small as we large fleet of devices 
        in an infrastructure.
        </li>
        <li> <u>Intact Simplicity</u>: To encourage the ease of understanding
        and human readability, YAML format files are used to support 
        declarative configuration feature.
        </li>
        <li> <u>LAN as well as Remote management</u>: One of the most 
        important feature of ansible is its capability to manage the remote 
        networks.
        </li>
        <li> <u>Supports Infrastructure, Network, Cloud, Containers</u>: 
        Ansible can automate most of the contemporary infrastructure models 
        from bare metal to virtualization
        </li>
        </h6>
        </ul>
        
        </p>
        
        <p>
        </br>
        <u><b>ANSIBLE INSTALLATION</b> </u>
        </br>
        Ansible uses SSH protocol for management of the machines.
        On installation, Ansible does not adds any database, or starts any 
        background process. The <b>control machine</b> is installed with 
        ansible, and then it is used to further control other machines 
        (referred as, Nodes) on the same LAN or on remote newtork.
        
        NOTE: Windows is not used as a Control Machine. Ansible official 
        documentation page quotes, <i>"Running Ansible from a Windows control 
        machine directly is not a goal of the project. Refrain from asking 
        for this feature, as it limits what technologies, features, and code 
        we can use in the main project in the future."</i>
        </br> </br>
        
        <u>REQUIREMENTS AND DEPENDENCIES </u>
        </br><br>
        <u>Control machine</u>
        </br>
        Basic requirement of a control machine is Python 2 (2.6 or 2.7) or 
        Python 3 (3.5 or higher). However, only the latest version of Ansible 
        support Python 3, it is still advisable to run Python 2 for the 
        beginners.
        
        <br><br>
        <u>Nodes</u>
        <br>
        Python 2 (2.6 or 2.7) should be up and running on node machines to be 
        managed.</br>
        SSH, SFTP, SCP are few protocols which can be used as mode of 
        communictaion to manage the nodes. By default SFTP is used, however, 
        it is advisable to switch to SSH.
        
        <br><br>
        <u>UBUNTU installation </u>
        </br>
        <pre>
        $ sudo apt-get update
        $ sudo apt-get install software-properties-common
        $ sudo apt-add-repository ppa:ansible/ansible
        $ sudo apt-get update
        $ sudo apt-get install ansible
        </pre>
        </p>
        <p>
        
        <u>MAC installation </u>
        </br>
        
        'pip' is used for easy installation, but it isn't available on OSX by 
        default. So, we can use python's package manager easy_install to 
        install pip.
        <pre>       $sudo easy_install pip </pre>
        </p>
        </br>

        <p>
        Post pip installation, ansible can be very easy installed on an OSX
        
        <pre>
        $ sudo pip install ansible
        $ sudo pip install ansible --upgrade
        </pre>
        </p>
        <p>On OSX Maverick, compiler might create some issue, which can be 
        easily dealt with following command.
        
        <pre>   $ sudo CFLAGS=-Qunused-arguments CPPFLAGS=-Qunused-arguments 
        pip install ansible</pre>
        </p>
        <br>
        <p>
        <u><b>Essentials 1: PLAYS and PLAYBOOK</b></u> </br>
        <br>
        A 'Play' can be simply defined as set of rules which map host or 
        servers in concern to a task or activity. A play basically is used to 
        call for for an ansible module. A playbook is simply defined as a set 
        of multiple plays in a list. 

        As a formal definition, <i>"Playbooks are Ansible’s configuration, 
        deployment, and orchestration language. They can describe a policy 
        you want your remote systems to enforce, or a set of steps in a 
        general IT process. Ansible playbooks are a way to send commands to 
        remote computers in a scripted way. Instead of using Ansible commands 
        individually to remotely configure computers from the command line, 
        you can configure entire complex environments by passing a script to 
        one or more systems."<sup>[1]</sup></i>

        <br><br>As mentioned in previous section, playbooks are written in YAML, with 
        help of minimum syntaxes and rules. The main intent is to make sure 
        that Ansible is least related to any scripting or programming 
        language. 
        </br></br>
        EXAMPLE:
        </p>
        <pre>
            ---
            - name: install ansible with pip
            - hosts: hostA

            tasks:
              -name: ansible pip
                pip:
                   name: ansible
                   virtualenv: ~/ansible_folder
        </pre>
        <p>
        In this example, we have used pip module to install latest ansible 
        package on the hostA in a particular python virtual environment named 
        as 'ansible_folder'.
        <br>
        <br>
        Now let us break each step in the above playbook to understand the 
        basics of the play.
        <br><br>
        <b><u>INVENTORY and HOSTS</u></b>
        <br>
        An inventory can be defined as a basic unit of the Ansible, which 
        define the group of hosts on which task(s) are executed. In simplest 
        form, it can be a put together as IPs of hostnames. When the number 
        of these IP addresses exapand, it is advised to contain them into 
        numbers of groups.
 

        In the above example, we have not defined any inventory but have 
        simply mentioned a single host 'hostA' as the target for the task. 
        <br>
        <pre>   - hosts: hostA </pre>

        </p>
        <br>
        <p>
        <b><u>VARIABLES</u></b>
        <br>
        Variables in any script or programming language provide flexibility 
        to store and iterate through various values or information. 
        Similary, in ansible, the variables play an important for evaluating 
        system values or strings used in various formats.
        <br>
        Variable could use letters, numbers, and underscores. However, a 
        variables must have a letter as its first character.

        'foo_port' or 'foo123' are acceptable variable names. However, 
        'foo-port, foo port, foo.port and 12' are invalid variable names.

        <br>
        In a playbook, variables can be defined as 
        <pre>
            - hosts: webservers
              vars:
                http_port: 80   
        </pre>  
        </p>
        <p>
        <u>Using Variables in Conditions</u>
        <br>
        Variables can be used as conditions, thus ensuring that certain tasks 
        are only run when for example on a given host the requested variable 
        is set to a certain value:

        <pre>
        tasks:
        - name: install Apache on Solaris
            pkg5: name=web/server/apache-24
            when: ansible_os_family == "Solaris"
        
        - name: install Apache on RHEL
            yum: name=httpd
            when: ansible_os_family == "RedHat"
        </pre>
        </p>
        <br>
        <p>
        In the above example, the task 1 acts when variable value is equal to 
        "Solaris" and task 2 executes when variable is equal to "Redhat" 
        <br>
        <br>
        <b><u>TASKS</u></b>
        <br>
        Ansible uses plays to define the certain task which are executed 
        serially againt the hosts or machine names defined as individual or in 
        groups. This basically depends on the mapping of a certain task with 
        the defined group of hosts as mentioned in previous section.
        <br><br>
        Errors generated or logged due to failiure of tasks are simply missed 
        for the whole playbook and later the reason for failed execution can 
        be simply edited or removed from the playbook, followed running the 
        play again.
        <br>
        <br>
        The main aim of a task is to execute an ansible module along with 
        arguments as needed, here used-defined variables are used as arguments.
        <br>
        <br>
        In the main example, we have described a simple task of installing 
        latest version of ansible on a host with ansible's pip module. Here, 
        we have not only given a command to pip ansible to the host but also 
        to install it in a seperate virtual environment folder. 
        <pre>
            tasks:
              -name: ansible pip
                pip:
                  name: ansible
                  virtualenv: ~/ansible_folder
        </pre>

        </p>
        
        <p>
        <br>
        <b><u>MODULES</u></b><br>       
        Ansible is majorly all about running a module in a correct way on a 
        list of hosts or inventory. Another major part of successful 
        implementation is also dependent on <i>"Modules (also referred to as “task plugins” or “library
        plugins”) are the ones that do the actual work in ansible, they are 
        what gets executed in each playbook task. But you can also run a single
        one using the ‘ansible’ command."<sup>[3]</sup> </i>
        <br><br>
        One of the most common way of using a module and passing arguments in 
        YAML is defined below as an example
        <pre>
            - name: restart webserver
            service:
                name: httpd
                state: restarted
        </pre>
        </p>
        <p>
        The data returned by Ansible module results can be stored into a 
        variable, as well as, it can be produced as text output results on 
        the screen 
        </p>
        
        <p>
        <br><b>
        This is the end of part 1 of Ansible basics tutorial, in the next 
        section of the tutorial we will only discuss various ansible modules, 
        working, and examples. The best way to learn is to dig into practice, 
        thus, it is highly advisable to implement the scripts and examples in 
        the next section to understand the working and improve the ability to 
        debug the common issues faced during Ansible implementation.</b>
        <br><br>

        <pre><b><h3><a href="ansible2.html"> <u>ANSIBLE PART 2</u></a></h3></b></pre>
        </p>
        
        <p>
        </br>
        <b>REFERENCES:</b>
        <br>1. https://docs.microsoft.com/sl-si/azure/ansible/ansible-overview
        <br>2. docs.ansible.com/ansible
        <br>3. http://docs.ansible.com/ansible/2.4/modules_intro.html
        <br>4. http://docs.w3cub.com/ansible/common_return_values/
        <br>5. docs.ansible.com/ansible
        <br>6. nsrc.org/workshops/2015/rwnog/raw-attachment/wiki/Track2Agenda/
        first-playbook.htm
        <br>7. www.digitalocean.com/community/tutorials/how-to-create-ansible-
        playbooks-to-automate-system-configuration-on-ubuntu       
        <br>8. https://www.lynda.com/Ansible-tutorials/
        <br>9. http://docs.w3cub.com/ansible/playbooks_variables/
        </p>
        </div>
      </div>
    </body>
</html>
